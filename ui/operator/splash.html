<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>ChronoCore — Loading…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!--
    CSS: make external stylesheet NON-BLOCKING for first paint
    ----------------------------------------------------------
    Why this matters:
      - A normal <link rel="stylesheet"> blocks rendering until the CSS file is fetched + parsed.
      - On app launch, even “local” files add measurable delay before anything appears.
    Technique:
      - Load base.css with media="print" so the browser won’t block painting.
      - On load, flip media to "all" (activates stylesheet after we’ve shown the splash).
      - <noscript> fallback preserves styles if JS is disabled.
    Result:
      - The splash paints immediately with our inline styles (below),
        then base.css quietly applies once available—no perceived lag.
  -->
  <!-- BEFORE (render-blocking):
  <link rel="stylesheet" href="../css/base.css" />
  -->
  <!-- AFTER (non-blocking): -->
  <link rel="stylesheet" href="../css/base.css" media="print" onload="this.media='all'">
  <noscript><link rel="stylesheet" href="../css/base.css"></noscript>

  <!--
    Inline critical styles
    ----------------------
    Keep the splash self-sufficient for the first frame:
      - Avoid external fonts; use a system UI stack
      - Define the minimal palette/layout we need for a clean first impression
      - No images required; if you want the PRS mark, inline an SVG (optional)
  -->
  <style>
    :root {
      /* Minimal palette consistent with the app theme */
      --bg: #0b1117;
      --card: #0e151c;
      --ink: #dbeafe;
      --sub: #9fc7de;
      --accent: #22a6f2;
      --border: #102030;
    }

    /* Ensure we can paint immediately without waiting for base.css tokens */
    html, body { height: 100%; }
    body {
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      /* Use a native system stack; fast and already loaded */
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
      display: grid;
      place-items: center; /* center splash card vertically + horizontally */
    }

    /* The splash “card” — simple, classy, and cheap to render */
    .card {
      width: min(560px, 92vw);
      padding: 28px 24px;
      border: 1px solid var(--border);
      border-radius: 16px;
      background: var(--card);
      box-shadow: 0 12px 24px rgba(0,0,0,.35);

      /* Gentle entrance so it doesn’t pop harshly */
      opacity: 0;
      transform: translateY(6px);
      animation: rise .25s ease-out forwards;
    }
    @keyframes rise { to { opacity: 1; transform: none; } }

    /* Brand row (inline icon + product name) */
    .brand {
      display: flex;
      align-items: center;
      gap: 14px;
      margin-bottom: 14px;
    }

    /* Inline logo mark — optional; remove if you prefer pure text */
    .logo { width: 56px; height: 56px; }

    .title {
      font-size: 22px;
      font-weight: 800;
      letter-spacing: .02em;
    }
    .sub {
      color: var(--sub);
      margin: 6px 0 0 70px; /* align with mark edge */
    }

    /* Indeterminate progress bar: visually communicates “work in progress” without timers */
    .bar {
      margin: 18px 0 0 70px;
      height: 6px;
      width: calc(100% - 70px);
      background: #0c1218;
      border: 1px solid var(--border);
      border-radius: 999px;
      overflow: hidden;
    }
    .bar__fill {
      height: 100%;
      width: 28%;
      background: linear-gradient(90deg, rgba(34,166,242,.2), rgba(34,166,242,.5));
      animation: flow 1.2s ease-in-out infinite;
    }
    @keyframes flow {
      0%   { transform: translateX(-40%); }
      50%  { transform: translateX(80%);  }
      100% { transform: translateX(140%); }
    }

    .hint {
      margin: 10px 0 0 70px;
      color: var(--sub);
      font-size: 14px;
    }

    /* Optional footer line for a version or tiny tips */
    .small {
      font-size: 12px;
      color: #7aa7c2;
      margin-left: 70px;
      margin-top: 6px;
    }
  </style>
</head>

<body>
  <!--
    Splash content
    --------------
    Keep it minimal: brand, short status line, and an indeterminate bar.
    No JS required for “instant paint”—the non-blocking CSS swap handles the rest.
    If you want auto-redirect-on-ready behavior, we’ll add a tiny script later that
    probes /health or /race/state; for now we keep it purely visual per your request.
  -->
  <div class="card" role="status" aria-live="polite">
    <div class="brand">
      <!-- Inline SVG keeps us network-free;
           Replace with your PRS mark if you like, or remove entirely -->
      <svg class="logo" viewBox="0 0 64 64" fill="none" aria-hidden="true">
        <circle cx="32" cy="32" r="30" stroke="url(#g)" stroke-width="2"/>
        <path d="M18 32h28M32 18v28" stroke="url(#g)" stroke-width="3" stroke-linecap="round"/>
        <defs>
          <linearGradient id="g" x1="0" y1="0" x2="64" y2="64">
            <stop stop-color="#22a6f2"/><stop offset="1" stop-color="#6ee7ff"/>
          </linearGradient>
        </defs>
      </svg>
      <div class="title">ChronoCore</div>
    </div>

    <p class="sub">Starting services…</p>
    <div class="bar"><div class="bar__fill"></div></div>
    <p class="hint">This will only take a moment.</p>
    <p class="small">Tip: Keep this window visible—Operator Home will load as soon as the engine is ready.</p>
  </div>

  <!--
    No script block needed for paint speed.
    If/when you want “auto-advance when /health is OK,” we can add a tiny, deferred script
    that starts AFTER first paint and will not affect splash immediacy.
  -->
</body>
</html>
