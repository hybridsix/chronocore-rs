app:
  name: ChronoCore Race Software
  version: 0.9.0-dev
  environment: development
  client:
    engine:
      mode: localhost
      fixed_host: 127.0.0.1:8000
      prefer_same_origin: false
      allow_client_override: true
  engine:
    event:
      name: Maker Faire Orlando
      date: '2025-11-08'
      location: Orlando, FL
    default_min_lap_s: 10
    ingest:
      debounce_ms: 250
      per_location_debounce_ms: {}
    unknown_tags:
      allow: true
      auto_create_name: Unknown
    persistence:
      enabled: true
      sqlite_path: backend/db/laps.sqlite
      journal_passes: true
      snapshot_on_checkered: true
      checkpoint_s: 15
      batch_ms: 200
      batch_max: 50
      fsync: true
      recreate_on_boot: false
    diagnostics:
      enabled: true
      buffer_size: 500
      stream:
        transport: sse
      beep:
        max_per_sec: 5
    scoring:
      break_ties_by_best_lap: true
      include_pit_time_in_total: true
  hardware:
    decoders:
      ilap_serial:
        port: COM3
        baudrate: 9600
        init_7digit: true
        min_lap_s: 10
      ambrc_serial:
        port: COM4
        baudrate: 19200
        min_lap_s: 10
    pits:
      enabled: false
      receivers: null
  track:
    locations:
      SF: Start/Finish
      PIT_IN: Pit In
      PIT_OUT: Pit Out
      X1: Crossing X
  race:
    flags:
      inference_blocklist:
      - YELLOW
      - RED
      - SC
      post_green_grace_ms: 3000
    missed_lap:
      enabled: false
      apply_mode: propose
      window_laps: 5
      sigma_k: 2
      min_gap_ms: 8000
      max_consecutive_inferred: 1
      mark_inferred: true
  ui:
    theme: default-dark
    show_sim_pill: true
    net_status_text:
      ok: OK
      connecting: Connecting…
      disconnected: Disconnected - retrying…
client:
  default_page: entrants
  theme:
    mode: dark
    accent: '#00b4ff'
    secondary: '#22c55e'
  backend_base_url: http://127.0.0.1:8000
scanner:
  source: ilap.serial
  decoder: ilap_serial
  role: track
  min_tag_len: 7
  duplicate_window_sec: 0.5
  rate_limit_per_sec: 20
  serial:
    port: COM3
    baud: 9600
  udp:
    host: 0.0.0.0
    port: 5000
publisher:
  mode: http
  http:
    base_url: http://127.0.0.1:8000
    timeout_ms: 500
log:
  level: info
track:
  bindings:
  - computer_id: race_control
    decoder_id: ilap-210
    port: COM3
    location_id: SF
  - computer_id: t640-pit-a
    decoder_id: ilap-311
    port: udp://0.0.0.0:5002
    location_id: PIT_IN
  - computer_id: t640-pit-b
    decoder_id: ilap-311
    port: udp://0.0.0.0:5003
    location_id: PIT_OUT
  - computer_id: t640-x
    decoder_id: ilap-099
    port: /dev/ttyUSB0
    location_id: X1
sounds:
  volume:
    master: 1
    horns: 1
    beeps: 1
  files:
    lap_indication: lap_beep.wav
    countdown: countdown_beep.wav
    start: start_horn.wav
    end: end_horn.wav
    white_flag: white_flag.wav
    checkered: checkered_flag.wav
    rank_change: rank_change.wav
    best_lap: best_lap.wav
journaling:
  enabled: false
  table: passes_journal
