/* ======================================================================
   RACE CONTROL — cleaned + organized (multiline formatting)
   Keeps existing visuals; removes duplicates; clarifies cascade.
   ====================================================================== */

/* ========== 1) GLOBAL TOKENS ========== */
:root {
  --toolbarH: 56px;

  /* One knob for the shared flag pulse period */
  --syncPulseMs: 1000ms; /* 1.00s default; tweak for faster/slower beacon */

  /* Flags */
  --flag-col-w: 200px;
  --flag-btn-h: 88px;
  --flag-btn-fz: 20px;
  --flag-gap: 8px;

  /* Panes / palette */
  --panel: #0f1a24;
  --panel-edge: #213243;
  --panel-shadow: rgba(0, 0, 0, .35);
  --title-bar-top: #15627A;
  --title-bar-bot: #104C60;
  --title-bar-edge: #2a475e;
  --title-text: #e8f2fb;

  /* Text */
  --text: #e6edf3;
  --text-dim: #c0cad3;
  --text-muted: #99a7b4;

  /* Clock */
  --big-clock-size: 56px;
  --clock-font: "SF Mono", "Roboto Mono", Consolas, "Liberation Mono", Menlo, monospace;

  /* Buttons (teal group) */
  --teal-1: #15627A;
  --teal-2: #104C60;
  --teal-edge: #2b4a63;
}

/* ========== 2) PAGE LAYOUT ========== */
body.race-control {
  min-width: 1920px;
  min-height: 1080px;
}

.rcWrap {
  display: grid;
  grid-template-rows: var(--toolbarH) 1fr;
  gap: 10px;
  padding: 12px 16px;
  width: 1920px;
  margin: 0 auto;
  box-sizing: border-box;
}

.rcGrid {
  display: grid;
  grid-template-columns: var(--flag-col-w) 1fr;
  grid-template-rows: auto 1fr;
  column-gap: 16px;
  row-gap: 12px;
  min-height: 0;
}

#paneFlags {
  grid-column: 1;
  grid-row: 1 / span 2;
}

#paneClock {
  grid-column: 2;
  grid-row: 1;
}

#paneLive {
  grid-column: 2;
  grid-row: 2;
}

/* ========== 3) PANE & TOOLBAR ========== */
.pane {
  background: #0c1318;
  border: 1px solid #0b0f13;
  border-radius: 12px;
  box-shadow: 0 0 0 1px #0c1116, inset 0 0 0 1px #0a0f14;
  display: grid;
  grid-template-rows: auto 1fr;
  min-height: 0;
}

.pane__head {
  margin: 6px 8px 10px;
  padding: 8px 12px;
  color: var(--title-text);
  font-weight: 700;
  background: linear-gradient(180deg, var(--title-bar-top), var(--title-bar-bot));
  border: 1px solid var(--title-bar-edge);
  border-radius: 8px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .08);
  font-size: 16px;
}

.pane__body {
  padding: 12px;
  overflow: auto;
}

/* hide headers for these panes */
.race-control #paneFlags .pane__head,
.race-control #paneClock .pane__head,
.race-control #paneLive .pane__head {
  display: none;
}

.race-control #paneFlags,
.race-control #paneClock,
.race-control #paneLive {
  grid-template-rows: 1fr;
}

.toolBar {
  display: flex;
  align-items: center;
  gap: 10px 12px;
  padding: 10px 12px;
  margin: 8px 0 14px;
  min-height: 48px;
  background: var(--panel);
  border: 1px solid var(--panel-edge);
  border-radius: 12px;
  box-shadow: 0 0 0 1px #0c1116, 0 8px 24px var(--panel-shadow);
  position: relative;
  z-index: 1;
}

.toolBar .left,
.toolBar .right {
  display: flex;
  align-items: center;
  flex-wrap: wrap;
  gap: 10px 12px;
}

.toolBar .sep {
  opacity: .35;
  padding: 0 4px;
  user-select: none;
}

.toolTitle {
  color: #e8f2fb;
  font-weight: 700;
  padding: 6px 10px;
  background: linear-gradient(180deg, #15627A, #104C60);
  border: 1px solid #2a475e;
  border-radius: 8px;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .08);
  margin-right: 10px;
  white-space: nowrap;
  font-size: 14px;
  line-height: 1;
}

/* ========== 4) BUTTONS/INPUTS ========== */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 8px;
  background: #172532;
  border: 1px solid #263546;
  color: var(--text);
  cursor: pointer;
}

.btn-primary {
  background: linear-gradient(180deg, var(--teal-1), var(--teal-2));
  border-color: var(--teal-edge);
  color: #e6f7ff;
}

.btn-success {
  background: linear-gradient(180deg, #1f7a4d, #165a39);
  border-color: #2c5f47;
}

.btn-danger {
  background: linear-gradient(180deg, #8b3434, #672525);
  border-color: #6d3a3a;
}

.btn--sm {
  padding: 4px 10px;
  font-size: 12px;
  border-radius: 6px;
}

.radio,
.checkbox {
  display: inline-flex;
  align-items: center;
  gap: 6px;
}

.toolBar .btn,
.toolBar .pill,
.toolBar .radio {
  margin-top: 0;
  margin-bottom: 0;
}

.toolBar * {
  line-height: 1;
}

/* ========== 5) FLAGS COLUMN ========== */
#paneFlags {
  width: 100%;
}

#paneFlags .pane__body {
  display: grid;
  grid-template-columns: 1fr;
  padding: 8px;
  gap: var(--flag-gap);
}

/* pre-race half-height row */
#preFlagRow {
  width: 100%;
  min-width: 0;
  height: calc(var(--flag-btn-h) / 2);
  margin-bottom: calc(var(--flag-gap) * 3);
  display: grid;
}

#preFlagRow .flag {
  font-size: calc(var(--flag-btn-fz) * 0.9);
}

#flagPad.flag-pad {
  display: grid;
  grid-template-columns: 1fr;
  grid-auto-rows: var(--flag-btn-h);
  row-gap: var(--flag-gap);
}

#flagPad .flag,
#preFlagRow .flag {
  width: 100%;
  height: 100%;
  padding: 0;
  border-radius: 8px;
  font-weight: 800;
  display: grid;
  place-items: center;
  line-height: 1.1;
  letter-spacing: .02em;
  color: #fff;
  border: 1px solid #2a3b4b;
  cursor: pointer;
}

#flagPad .flag {
  font-size: var(--flag-btn-fz);
}

#flagPad .flag:hover,
#preFlagRow .flag:hover {
  filter: brightness(1.06);
}

#flagPad .flag:active,
#preFlagRow .flag:active {
  transform: translateY(1px);
}

/* default pre-race tone (darker slate) */
#preFlagRow .flag--pre {
  background: #26323c;
  border-color: #1d2931;
  color: #e6edf3;
}

.flag--black,
.flag--sc,
.flag--vsc {
  display: none !important;
}

#flagPad .flag--green {
  background: #1fb15b;
  border-color: #1a8c4a;
}

#flagPad .flag--yellow {
  background: #e0b11f;
  border-color: #b38d19;
  color: #1a1a1a;
}

#flagPad .flag--red {
  background: #d04747;
  border-color: #a33a3a;
}

#flagPad .flag--blue {
  background: #3a78e0;
  border-color: #2f63bb;
}

#flagPad .flag--white {
  background: #f0f3f7;
  border-color: #cfd9e4;
  color: #151a20;
}

#flagPad .flag--checkered {
  position: relative;
  color: #fff;
  border-color: #4a5664;
  background: repeating-linear-gradient(45deg, #000 0 16px, #fff 16px 32px);
  text-shadow: 0 1px 2px rgba(0, 0, 0, .8), 0 0 2px rgba(0, 0, 0, .6);
}

#flagPad .flag--checkered::after {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(0, 0, 0, .25);
  border-radius: 8px;
  pointer-events: none;
}

/* active state + pulse (final authority) */
@keyframes flagPulse {
  0% {
    transform: scale(1);
    filter: brightness(1);
  }
  50% {
    transform: scale(1.03);
    filter: brightness(1.12);
  }
  100% {
    transform: scale(1);
    filter: brightness(1);
  }
}

#paneFlags #flagPad .flag.is-active,
#paneFlags #preFlagRow .flag.is-active {
  outline: 2px solid rgba(255, 255, 255, .18);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, .12);
  animation: flagPulse var(--syncPulseMs) ease-in-out infinite;
}

#paneFlags #flagPad .flag--green.is-active {
  animation: none;
  filter: brightness(1.5) saturate(1.08);
  box-shadow: 0 0 0 2px rgba(255, 255, 255, .12), 0 0 16px rgba(80, 220, 120, .38);
}

/* ========== 6) CLOCK ROW ========== */
#paneClock .pane__body {
  overflow: hidden;
}

#paneClock .clockBody {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 8px 12px;
}

/* left cluster: actions */
.clockActions {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* deliberate wide gap after Pre-Race → Start Race */
#btnStartPrep {
  margin-right: 32px;
}

/* right cluster: Mode + big clock */
.clockDisplay {
  margin-left: auto;
  display: flex;
  align-items: center;
  gap: 12px;
}

#paneClock .clockMeta {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 4px;
  min-width: 140px;
  width: 160px;
}

#paneClock .toolbar-label {
  color: var(--text-muted);
  font-size: 12px;
  line-height: 1;
}

/* clock typography (authoritative) */
.bigClock,
.clock {
  font-family: var(--clock-font);
  font-variant-numeric: tabular-nums lining-nums;
  -webkit-font-feature-settings: "tnum" 1, "lnum" 1;
  font-feature-settings: "tnum" 1, "lnum" 1;
  letter-spacing: .03em;
}

.bigClock {
  font-size: clamp(48px, 6.5vw, var(--big-clock-size, 80px));
  font-weight: 900;
  line-height: 1;
  color: #e6f3ff;
  text-shadow: 0 2px 10px rgba(0, 0, 0, .45);
  min-width: 8ch;
  text-align: right;
}

#btnClockMode {
  min-width: 12ch;
}

/* ========== 7) LIVE LISTS / TIMERS ========== */
.timers {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  margin-bottom: 12px;
}

.timer {
  background: rgba(255, 255, 255, .02);
  border: 1px solid var(--panel-edge);
  border-radius: 8px;
  padding: 10px;
}

.timer__label {
  color: var(--text-dim);
  margin-bottom: 6px;
}

.timer__value {
  font-size: 28px;
  font-weight: 900;
}

.liveSplit {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
  min-height: 0;
}

.liveHead {
  font-weight: 700;
  margin-bottom: 6px;
}

.liveList {
  list-style: none;
  margin: 0;
  padding: 0;
  border: 1px solid var(--panel-edge);
  border-radius: 8px;
  min-height: 120px;
}

.liveList li {
  padding: 6px 8px;
  border-bottom: 1px solid #0e151b;
  color: var(--text-muted);
}

.liveList li:last-child {
  border-bottom: 0;
}

/* ========== 8) MISC ========== */
.flag-chip {
  display: inline-block;
  padding: 4px 8px;
  border-radius: 999px;
  font-weight: 800;
  background: #2b3b4b;
  border: 1px solid #3b4d61;
}

.flag-chip[data-flag="green"] {
  background: #1c7a3a;
  border-color: #2a7a4b;
}

.flag-chip[data-flag="yellow"] {
  background: #a4861e;
  border-color: #b79a2a;
}

.flag-chip[data-flag="white"] {
  background: #bfc6cf;
  color: #111;
  border-color: #d1d7de;
}

.flag-chip[data-flag="red"] {
  background: #9a2e2e;
  border-color: #b23b3b;
}

.flag-chip[data-flag="blue"] {
  background: #2c5fb7;
  border-color: #3c6fcc;
}

#flagInfo {
  min-width: 0;
  color: var(--text-muted);
}

#flagInfo .hint {
  margin-top: 2px;
}

.hidden {
  display: none !important;
}

/* ======================================================================
   Race Control — match Race Setup palette & panel treatment
   ====================================================================== */

body.race-control {
  /* palette (mirrors .race-setup) */
  --bg:             #0b131b;
  --panel:          #0f1a24;
  --panel-edge:     #213243;
  --panel-shadow:   rgba(0, 0, 0, 0.35);
  --text:           #e6edf3;
  --text-dim:       #c0cad3;
  --text-muted:     #99a7b4;
  --title-bar-top:  #15627A;
  --title-bar-bot:  #104C60;
  --title-bar-edge: #2a475e;
  --title-text:     #e8f2fb;

  background: var(--bg);
  color: var(--text);
}

/* Page wrap (if you have .wrap on RC as well) */
.race-control main.wrap {
  background: var(--bg);
  color: var(--text);
}

/* Pane shells */
.race-control .pane {
  background: var(--panel);
  border: 1px solid var(--panel-edge);
  border-radius: 12px;
  box-shadow: 0 2px 8px var(--panel-shadow);
}

/* Pane titles use the same teal gradient cap */
.race-control .pane__head {
  margin: 0 0 10px;
  padding: 8px 12px;
  font-size: 16px;
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: .02em;
  color: var(--title-text);
  background: linear-gradient(180deg, var(--title-bar-top), var(--title-bar-bot));
  border: 1px solid var(--title-bar-edge);
  border-radius: 2px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
}

/* Clock strip / toolbars feel like Setup cards */
.race-control .clockRow,
.race-control #paneClock .pane__body,
.race-control .toolBar {
  background: var(--panel);
  border: 1px solid var(--panel-edge);
  border-radius: 10px;
  box-shadow: 0 2px 8px var(--panel-shadow);
}

/* Flags panel body */
.race-control #paneFlags .pane__body {
  background: #0e1821; /* slightly darker than panel for depth */
  border: 1px solid var(--panel-edge);
  border-radius: 10px;
}

/* Live feed / lists */
.race-control #paneLive .pane__body,
.race-control #paneData .pane__body {
  background: #0e1821;
  border: 1px solid var(--panel-edge);
  border-radius: 10px;
}

/* Chips, small labels */
.race-control .toolbar-label,
.race-control .chip {
  color: var(--text-muted);
}

/* ---- Race Control: Last Lap Feed styling ---- */
#panelFeed {
  --feed-gap: 8px;
  --feed-pad: 10px;
  --feed-row-bg: var(--pane-bg, #121418);
  --feed-row-border: rgba(255,255,255,0.06);
  --feed-accent: var(--brand-accent, #7fd);
  --feed-mono: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
}

/* make list look like a neat ticker */
#lapFeed {
  list-style: none;
  margin: 0;
  padding: 0;
  display: grid;
  gap: var(--feed-gap);
}

/* each row is a soft card with grid columns */
#lapFeed .liveRow {
  display: grid;
  grid-template-columns: 72px 1fr repeat(3, minmax(92px, 120px));
  align-items: center;
  gap: 12px;
  padding: var(--feed-pad);
  background: var(--feed-row-bg);
  border: 1px solid var(--feed-row-border);
  border-radius: 12px;
  box-shadow: 0 2px 10px rgba(0,0,0,0.18);
}

/* cells */
#lapFeed .liveCell {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Number pill */
#lapFeed .liveNum {
  justify-self: start;
  font-weight: 700;
  letter-spacing: 0.2px;
  color: #0ad5c1;
  background: rgba(10, 213, 193, 0.1);
  border: 1px solid rgba(10, 213, 193, 0.35);
  padding: 4px 8px;
  border-radius: 999px;
}

/* Name trims nicely and can grow */
#lapFeed .liveName {
  font-weight: 600;
  color: #e8eef7;
  min-width: 120px;
}

/* lap/time buckets use monospace and right-align */
#lapFeed .liveLaps,
#lapFeed .liveLast,
#lapFeed .liveBest {
  font-family: var(--feed-mono);
  justify-self: end;
  color: #cfd7e3;
}

/* emphasize best */
#lapFeed .liveBest {
  color: var(--feed-accent);
  font-weight: 600;
}

/* small screens: collapse last/best into two columns */
@media (max-width: 900px) {
  #lapFeed .liveRow {
    grid-template-columns: 64px 1fr 90px 90px;
  }
  #lapFeed .liveLaps { display: none; }
}

/* extra-small: stack rows comfortably */
@media (max-width: 640px) {
  #lapFeed .liveRow {
    grid-template-columns: 56px 1fr;
    row-gap: 6px;
  }
  #lapFeed .liveLaps,
  #lapFeed .liveLast,
  #lapFeed .liveBest {
    justify-self: start;
  }
}

/* PRE/COUNTDOWN: Seen grid (TAG | Number | Name | Reads) */
#panelSeen .liveHead {
  display: grid;
  grid-template-columns: 12ch 8ch 1fr 8ch; /* TAG | Number | Name | Reads */
  gap: 10px;
  align-items: center;
  padding: 8px 10px;
  border-bottom: 1px solid var(--line-weak, rgba(255,255,255,0.12));
  font-weight: 600;
  font-variant-numeric: tabular-nums;
}
#seenList.liveList {
  max-height: 38vh;   /* ~12–16 rows visible */
  overflow: auto;
  padding: 0;
  margin: 0;
}
#seenList .seenRow {
  display: grid;
  grid-template-columns: 12ch 8ch 1fr 8ch;
  gap: 10px;
  align-items: center;
  padding: 8px 10px;
  border-bottom: 1px solid var(--line-weak, rgba(255,255,255,0.08));
  font-variant-numeric: tabular-nums;
}
#seenList .cell { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
#seenList .reads { text-align: right; }
#seenList .num   { text-align: right; justify-self: end; }

/* --- Seen table polish --- */

/* Dark header + rows for readability */
#panelSeen .liveHead {
  background: #0d1117;        /* near-black */
  color: rgba(255,255,255,0.92);
}

#seenList.liveList {
  background: #0a0f14;        /* near-black */
}

#seenList .seenRow {
  background: #0a0f14;
  color: rgba(255,255,255,0.92);
  border-bottom-color: rgba(255,255,255,0.06);
}

/* Subtle row hover for scanability */
#seenList .seenRow:hover {
  background: #0c131a;
}

/* Center the Number column */
#seenList .seenRow .num {
  text-align: center;
  justify-self: center;
}

/* “Entrant Seen” pill */
.seen-pill {
  display: inline-block;
  margin-left: 10px;
  padding: 2px 8px;
  border-radius: 999px;
  font-size: 12px;
  line-height: 1.3;
  font-weight: 600;
  background: #1f6f43;        /* deep green base */
  color: #dfffea;              /* minty text */
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.25);
}

/* Slightly brighter when row is active/hovered */
#seenList .seenRow:hover .seen-pill {
  background: #238b57;
}

/* Make the Name cell a flex row so the pill can dock to the right */
#seenList .seenRow .name {
  display: flex;
  align-items: center;
  gap: 8px;
}

/* Push the pill to the right edge of the Name column */
#seenList .seenRow .name .seen-pill {
  margin-left: auto;
}

/* Right-aligned summary in the Start settings row */
.toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
}

.toolbar-spacer {
  flex: 1 1 auto;
}

/* Flex row for controls + summary */
.toolbar { display: flex; align-items: center; gap: 12px; }
.toolbar-spacer { flex: 1 1 auto; }

/* Summary text (mirror of .race-setup .summary) */
.rc-summary {
  font-size: 18px;
  color: var(--text-muted);
  white-space: nowrap;
}

/* Optional: trim on very narrow screens */
@media (max-width: 900px) {
  .rc-summary { font-size: 16px; }
}
/* Center holder keeps the pill fixed-width and centered */
.toolbar {
  display: flex;
  align-items: center;
  gap: 12px;
}
.toolbar-center {
  flex: 1 1 auto;
  display: flex;
  justify-content: center;
}

/* Flag pill */
#flagPill {
  width: min(500px, 55vw);
  min-width: 320px;
  height: 36px;                 /* low profile */
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0 16px;
  font-weight: 800;
  letter-spacing: 0.4px;
  text-transform: uppercase;
  border: 1px solid rgba(0,0,0,0.15);
  box-shadow: 0 10px 22px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.10);
  color: #0a0d10;               /* default dark text; overridden per-flag */
  user-select: none;
}

/* Text inside */
#flagPillText {
  font-size: clamp(16px, 2.2vw, 20px);
}

/* Pulse once on change */
#flagPill.pulse {
  animation: flagPillPulse 1s ease-out 1;
}
@keyframes flagPillPulse {
  0%   { transform: scale(0.98); box-shadow: 0 0 0 0 rgba(255,255,255,0.4); }
  45%  { transform: scale(1.015); box-shadow: 0 0 0 10px rgba(255,255,255,0.18); }
  100% { transform: scale(1.0);  box-shadow: 0 10px 22px rgba(0,0,0,0.25), inset 0 0 0 1px rgba(255,255,255,0.10); }
}

/* Flag colors (sun-readable) */
:root{
  --green:   #1bd15a;
  --yellow:  #ffd02a;
  --red:     #ff485a;
  --blue:    #4aa3ff;
  --white:   #f3f6fb;
  --pre:     #7b8a97;
}
body[data-flag="GREEN"]     #flagPill { background: var(--green);  color:#04130a; }
body[data-flag="YELLOW"]    #flagPill { background: var(--yellow); color:#221c00; }
body[data-flag="RED"]       #flagPill { background: var(--red);    color:#1b0004; }
body[data-flag="BLUE"]      #flagPill { background: var(--blue);   color:#051121; }
body[data-flag="WHITE"]     #flagPill { background: var(--white);  color:#071017; }
body[data-phase="pre"]      #flagPill,
body[data-flag="PRE"]       #flagPill { background: var(--pre);    color:#071017; }
body[data-flag="CHECKERED"] #flagPill {
  background:
    repeating-linear-gradient(45deg, #fff 0 16px, #121212 16px 32px);
  color:#0a0d10;
  text-shadow: 0 1px 0 rgba(255,255,255,0.35);
}

/* On narrow screens, let the pill shrink a bit */
@media (max-width: 820px) {
  #flagPill { 
    min-width: 260px; 
    height: 34px; 
  }
}
/* prefer-reduced-motion: disable the loop for accessibility */
@media (prefers-reduced-motion: reduce) {
  #flagPill.beacon { animation: none !important; }
}
#raceClock {
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
  min-width: 10ch;   /* space for sign + hh:mm:ss */
  text-align: center;
}

#raceClock {
  display: inline-flex;
  align-items: baseline;
  justify-content: center;
  font-variant-numeric: tabular-nums;
  font-feature-settings: "tnum";
}
#raceClock .clock-sign   { display:inline-block; width:1ch; text-align:right; }
#raceClock .clock-digits { display:inline-block; }

.post-finish {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 8px 0 12px;
}

/* Hidden until CHECKERED */
.post-finish.hidden { display: none; }

/* Blue, centered, roomy, with a little gap from Abort */
.btn--results {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 360px;
  padding: 10px 22px;
  font-size: 16px;
  font-weight: 700;
  text-align: center;

  /* use your palette if present; otherwise sane fallbacks */
  color: #fff;
  background: var(--blue-500, #2b6ff7);
  border: 1px solid var(--blue-600, #2058c7);
  border-radius: 10px;

  /* extra space before this button */
  margin-left: 16px;
}

.btn--results:hover {
  filter: brightness(1.08);
}

/* “breathing” pulse */
@keyframes breathe {
  0%   { transform: scale(1);   box-shadow: 0 0 0 0 rgba(43,111,247,0.30); }
  50%  { transform: scale(1.15); box-shadow: 0 0 22px 0 rgba(43,111,247,0.35); }
  100% { transform: scale(1);   box-shadow: 0 0 0 0 rgba(43,111,247,0.30); }
}

.btn--breathing {
  animation: breathe 1s ease-in-out infinite;
}
/* Shared pulse for pad + pill - uses the same flagPulse keyframes */
#flagPill.beacon {
  animation: flagPulse var(--syncPulseMs) ease-in-out infinite;
  will-change: transform, box-shadow, filter;
}

/* Single bright flash on flag change - doesn't interfere with beacon timing */
#flagPill.flash {
  filter: brightness(4.5) saturate(1.3);
  transition: filter 150ms ease-out;
}

/* Removed separate flagFlash keyframes to avoid timing conflicts */
